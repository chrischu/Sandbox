<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Development\SolutionInspector\src\SolutionInspector.Internals\ObjectModel\NuGetPackage.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Diagnostics.CodeAnalysis;
using System.Xml;
using JetBrains.Annotations;
using SolutionInspector.Api.ObjectModel;

namespace SolutionInspector.Internals.ObjectModel
{
  /// &lt;inheritdoc cref=&quot;INuGetPackage&quot; /&gt;
  public sealed class NuGetPackage : INuGetPackage
  {
    internal NuGetPackage (
      string id,
      Version version,
      bool isPreRelease,
      [CanBeNull] string preReleaseTag,
      string targetFramework,
      bool isDevelopmentDependency)
    {
      Id = id;
      Version = version;
      IsPreRelease = isPreRelease;
      PreReleaseTag = preReleaseTag;
      TargetFramework = targetFramework;
      IsDevelopmentDependency = isDevelopmentDependency;
    }

    /// &lt;inheritdoc /&gt;
    public string Id { get; }

    /// &lt;inheritdoc /&gt;
    public Version Version { get; }

    /// &lt;inheritdoc /&gt;
    public bool IsPreRelease { get; }

    /// &lt;inheritdoc /&gt;
    [CanBeNull]
    public string PreReleaseTag { get; }

    /// &lt;inheritdoc /&gt;
    public string FullVersionString =&gt; $&quot;{Version}{PreReleaseTag}&quot;;

    /// &lt;inheritdoc /&gt;
    public string PackageDirectoryName =&gt; $&quot;{Id}.{FullVersionString}&quot;;

    /// &lt;inheritdoc /&gt;
    public string TargetFramework { get; }

    /// &lt;inheritdoc /&gt;
    public bool IsDevelopmentDependency { get; }

    /// &lt;inheritdoc /&gt;
    public bool Equals([CanBeNull] INuGetPackage other)
    {
      if (ReferenceEquals(null, other))
        return false;
      if (ReferenceEquals(this, other))
        return true;
      return string.Equals(PackageDirectoryName, other.PackageDirectoryName);
    }

    internal static NuGetPackage FromXmlElement (XmlElement packageElement)
    {
      var id = packageElement.GetAttribute(&quot;id&quot;);
      var isPreRelease = false;
      string preReleaseTag = null;

      var versionString = packageElement.GetAttribute(&quot;version&quot;);
      if (versionString.Contains(&quot;-&quot;))
      {
        var split = versionString.Split(&#39;-&#39;);
        isPreRelease = true;
        preReleaseTag = &quot;-&quot; + split[1];
        versionString = split[0];
      }

      var version = Version.Parse(versionString);

      var targetFramework = packageElement.GetAttribute(&quot;targetFramework&quot;);

      var isDevelopmentDependency = packageElement.HasAttribute(&quot;developmentDependency&quot;)
                                    &amp;&amp; packageElement.GetAttribute(&quot;developmentDependency&quot;) == &quot;true&quot;;

      return new NuGetPackage(id, version, isPreRelease, preReleaseTag, targetFramework, isDevelopmentDependency);
    }

    /// &lt;inheritdoc /&gt;
    public override bool Equals([CanBeNull] object obj)
    {
      if (ReferenceEquals(null, obj))
        return false;
      if (ReferenceEquals(this, obj))
        return true;
      return obj is INuGetPackage nuGetPackage &amp;&amp; Equals(nuGetPackage);
    }

    /// &lt;inheritdoc /&gt;
    [ExcludeFromCodeCoverage]
    public override int GetHashCode()
    {
      return PackageDirectoryName.GetHashCode();
    }

    /// &lt;summary&gt;
    ///   Compares two &lt;see cref=&quot;NuGetPackage&quot; /&gt;s by using &lt;see cref=&quot;Equals(object)&quot; /&gt; and returns &lt;see langword=&quot;true&quot; /&gt; if
    ///   they are equal, &lt;see langword=&quot;false&quot; /&gt; otherwise.
    /// &lt;/summary&gt;
    public static bool operator == ([CanBeNull] NuGetPackage left, [CanBeNull] NuGetPackage right)
    {
      return Equals(left, right);
    }

    /// &lt;summary&gt;
    ///   Compares two &lt;see cref=&quot;NuGetPackage&quot; /&gt;s by using &lt;see cref=&quot;Equals(object)&quot; /&gt; and returns &lt;see langword=&quot;false&quot; /&gt; if
    ///   they are equal, &lt;see langword=&quot;true&quot; /&gt; otherwise.
    /// &lt;/summary&gt;
    public static bool operator != ([CanBeNull] NuGetPackage left, [CanBeNull] NuGetPackage right)
    {
      return !Equals(left, right);
    }
  }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[12,5,18,36,1],[20,7,20,15,1],[21,7,21,25,1],[22,7,22,35,1],[23,7,23,37,1],[24,7,24,41,1],[25,7,25,57,1],[42,40,42,67,1],[45,43,45,70,1],[56,7,56,40,1],[57,9,57,22,1],[58,7,58,40,1],[59,9,59,21,1],[60,7,60,78,1],[65,7,65,50,1],[66,7,66,32,1],[67,7,67,35,1],[69,7,69,66,1],[70,7,70,39,1],[72,9,72,46,1],[73,9,73,29,1],[74,9,74,40,1],[75,9,75,34,1],[78,7,78,50,1],[80,7,80,76,1],[82,7,83,103,1],[85,7,85,115,1],[91,7,91,38,1],[92,9,92,22,1],[93,7,93,38,1],[94,9,94,21,1],[95,7,95,72,1],[111,7,111,34,1],[120,7,120,35,1]]);
    </script>
  </body>
</html>