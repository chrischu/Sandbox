<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Development\SolutionInspector\src\SolutionInspector.Configuration\Dynamic\SchemaLocationHelper.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Xml.Linq;
using System.Xml.Schema;
using SolutionInspector.Commons.Extensions;

namespace SolutionInspector.Configuration.Dynamic
{
  internal interface ISchemaLocationHelper
  {
    IReadOnlyDictionary&lt;string, string&gt; GetSchemaLocations (XDocument document);
  }

  internal class SchemaLocationHelper : ISchemaLocationHelper
  {
    public IReadOnlyDictionary&lt;string, string&gt; GetSchemaLocations (XDocument document)
    {
      var root = document.Root.AssertNotNull();
      var schemaLocationAttribute = root.Attribute(XName.Get(&quot;schemaLocation&quot;, XmlSchema.InstanceNamespace));

      var result = new Dictionary&lt;string, string&gt;();

      if (schemaLocationAttribute == null)
        return result;

      var split = schemaLocationAttribute.Value.Split(new char[0] /* =&gt; whitespace */, StringSplitOptions.RemoveEmptyEntries);

      if (split.Length % 2 != 0)
        throw new ArgumentException(
            &quot;The given document does not contain a valid schema location attribute of the form &#39;xsi:schemaLocation=\&quot;(&lt;Namespace&gt; &lt;Location&gt;)*\&quot;&#39;.&quot;,
            nameof(document));

      for (int i = 0; i &lt; split.Length; i += 2)
        result.Add(split[i], split[i + 1]);

      return result;
    }
  }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[18,7,18,48,1],[19,7,19,110,1],[21,7,21,53,1],[23,7,23,43,1],[24,9,24,23,1],[26,7,26,127,1],[28,7,28,33,1],[29,9,31,31,1],[33,12,33,21,1],[33,23,33,39,1],[33,41,33,47,1],[34,9,34,44,1],[36,7,36,21,1]]);
    </script>
  </body>
</html>